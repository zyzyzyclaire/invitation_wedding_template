<!DOCTYPE html>
<html lang="kr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>모바일 청첩장</title>
    <link rel="stylesheet" href="/static/css/reset.css" >
    <link rel="stylesheet" href="/static/css/index.css" >
</head>
<body>
    <div id="app">
        <div id="container">
            
            <div class="title_box">
                <header>
                    <div>강지혁</div>
                    <div>ㅡ</div>
                    <div>최유라</div>
                </header>
                <div class="main_img_card">
                    <div>
                        <img src="/static/images/wedding_img/wedding_img_0.jpg" alt="웨딩 메인 이미지" />
                    </div>
                    <div>
                        2022년 12월 10일 토요일 오후 1시 30분<br>
                        <div>아펠가모 광화문 B2 로스타뇨홀</div>
                    </div>
                </div>
            </div>

            <div class="famous_quote">
                <div>
                    <div class="famous_quote_icon">
                        <img src="/static/images/icon_image/icon_flower.png" alt="깃털 아이콘" >
                    </div>
                </div>
                <div>
                    <div>
                        두 사람이 꽃과 나무처럼 걸어와서<br>
                        서로의 모든 것이 되기 위해<br>
                        오랜 기다림 끝에 혼례식을 치르는 날<br>
                        세상은 더욱 아름다워라<br><br>
                        이해인, <사랑의 사람들이여>
                    </div>
                </div>
            </div>
            
            <div class="invitation_message">
                <div>
                    <div>초대합니다</div>
                    <div>
                        <div>
                            살랑이는 바람결에<br>
                            사랑이 묻어나는 계절입니다.<br>
                            여기 곱고 예쁜 두 사람이 <span>사랑</span>을 맺어<br>
                            인생의 반려자가 되려 합니다.<br>
                            새 인생을 시작하는 이 자리에 오셔서<br>
                            <span>축복</span>해 주시면 감사하겠습니다.
                        </div>
                    </div>
                    <div>
                        <img src="/static/images/wedding_img/wedding_img_1.jpg" alt="웨딩 서브 이미지">
                    </div>
                    <div>
                        <div>
                            <span>
                                <span>
                                    <span>강재만</span>
                                    <span>·</span>
                                </span>
                                <span>서미숙</span>
                            </span>
                            <span class="relation">
                                <span>의</span>
                                <span>아들</span>
                            </span>
                            <span>지혁</span>
                            <span class="phone-circle">
                                <svg height="512" viewBox="0 0 128 128" width="512" xmlns="http://www.w3.org/2000/svg">
                                    <g id="icon">
                                        <path d="m54.048 43.653-3.928 6.122a7.725 7.725 0 0 0 .829 9.434l8.566 9.277 9.277 8.566a7.726 7.726 0 0 0 9.434.829l6.638-4.259 16.65 17.219-6.748 8.553a8.839 8.839 0 0 1 -9.277 3.039c-13.659-3.633-25.501-11.763-36.672-23.25-11.487-11.171-19.617-23.013-23.251-36.672a8.84 8.84 0 0 1 3.04-9.276l8.605-6.79z"></path>
                                        <path d="m85.054 73.5-1 .641 17.126 17.123.375-.475a5.5 5.5 0 0 0 -.434-7.3l-9.237-9.237a5.493 5.493 0 0 0 -6.83-.752z"></path>
                                        <path d="m37.212 26.445-.475.375 17.123 17.125.641-1a5.493 5.493 0 0 0 -.75-6.829l-9.237-9.237a5.5 5.5 0 0 0 -7.302-.434z"></path>
                                    </g>
                                </svg>
                            </span>
                        </div>
                        <div>
                            <span>
                                <span>
                                    <span>최현상</span>
                                    <span>·</span>
                                </span>
                                <span>정선화</span>
                            </span>
                            <span class="relation">
                                <span>의</span>
                                <span>딸</span>
                            </span>
                            <span>유라</span>
                            <span class="phone-circle">
                                <svg height="512" viewBox="0 0 128 128" width="512" xmlns="http://www.w3.org/2000/svg">
                                    <g id="icon">
                                        <path d="m54.048 43.653-3.928 6.122a7.725 7.725 0 0 0 .829 9.434l8.566 9.277 9.277 8.566a7.726 7.726 0 0 0 9.434.829l6.638-4.259 16.65 17.219-6.748 8.553a8.839 8.839 0 0 1 -9.277 3.039c-13.659-3.633-25.501-11.763-36.672-23.25-11.487-11.171-19.617-23.013-23.251-36.672a8.84 8.84 0 0 1 3.04-9.276l8.605-6.79z"></path>
                                        <path d="m85.054 73.5-1 .641 17.126 17.123.375-.475a5.5 5.5 0 0 0 -.434-7.3l-9.237-9.237a5.493 5.493 0 0 0 -6.83-.752z"></path>
                                        <path d="m37.212 26.445-.475.375 17.123 17.125.641-1a5.493 5.493 0 0 0 -.75-6.829l-9.237-9.237a5.5 5.5 0 0 0 -7.302-.434z"></path>
                                    </g>
                                </svg>
                            </span>
                        </div>
                    </div>
                    <div>
                        <div class="contact-box">혼주에게 연락하기</div>
                    </div>
                </div>
            </div>
            
            <div class="calendar_area">
                <div class="title">
                    <div id="current_date"></div>

                    <div style="font-size: 0.9rem; color: rgb(51, 51, 51); opacity: 1; transform: translate(0px, 0px);">
                        토요일 오후 1시 30분<br>
                    </div>
                </div>
                    
                <div class="calendar">
                    <table style="width: 252px; height: 272px; margin: 14px auto; text-align: center;">
                        <thead>
                            <tr>
                                <td>일</td>
                                <td>월</td>
                                <td>화</td>
                                <td>수</td>
                                <td>목</td>
                                <td>금</td>
                                <td>토</td>
                            </tr>
                        </thead>
                        <tbody id="tb_body">
                        </tbody>
                    </table>
                </div>
                결혼식 날짜
                토요리 시간
                달력
                00 ♥ 00의 결혼식이 00일 남았습니다.

            </div>
            <div class="gallery-wrap">
                갤러기
                사진 9장
            </div>
            <div class="map-wrap">
                오시는 길
                결혼식장 정확한 주소
                지도
                교통편 상세
            </div>
            <div class="account-wrap">
                마음 전하실 곳
                신랑측 계좌번호
                신부측 계좌번호
            </div>
            <div class="guestbook-wrap">
                방명록
            </div>
            <div class="footer-wrap">
                카톡으로 공유하기
                청첩장 주소 복사하기
            </div>
        </div>
    </div>
    <script>        
        // 달력 시작

        // 윤년 체크
        function checkedLeapYear(year){
            if(year % 400 == 0) return true;
            else if(year % 100 == 0) return false;
            else if(year % 4 == 0) return true;
            else return false;
        };

        // 달의 시작일이 어떤 요일(몇 번째 위치)에서 시작하는지 계산
        function getFirstDayOfWeek(year, month){
            if(month < 10) {
                month = "0" + month;
            };
            return (new Date(year + "-" + month + "-01" )).getDay();
        };

        // 월의 마지막 일자 계산
        function changeYearMonth(year, month){
            let month_day = [31,28,31,30,31,30,31,31,30,31,30,31];
            if(month == 2) if(checkedLeapYear(year)) month_day[1] = 29;
            let first_day_of_week = getFirstDayOfWeek(year, month);
            let arr_calendar = [];
            for(let i=0; i<first_day_of_week; i++){
                arr_calendar.push('');
            };
            for(let i=1; i<=month_day[month-1]; i++){
                arr_calendar.push(String(i));
            };
            let remain_day = 7 - (arr_calendar.length % 7);
            if(remain_day < 7){
                for(let i=0; i<remain_day; i++){
                    arr_calendar.push('');
                };
            };
            renderCalendar(arr_calendar)

        };

        function renderCalendar(data){
            let h = [];
            for(let i=0; i<data.length; i++){
                if(i==0){
                    h.push('<tr>');
                }else if(i % 7 == 0){
                    h.push('</tr>')
                    h.push('<tr>');
                };
                h.push(`<td onclick="setDate(${data[i]})"; style="cursor:pointer;">
                    <div id="calendar_${current_year}_${current_month}_${data[i]}" style="position: relative;">
                        ${data[i]}
                    </div>
                </td>`);
            }
            h.push('</tr>');
            document.getElementById('tb_body').innerHTML = h.join('')
            // $("#tb_body").html(h.join(''));
        }

        function setDate(day){
            // document.querySelector('.current_day').classList.remove('current_day')
            let target_date = `calendar_${current_year}_${current_month}_${day}`
            document.getElementById(`${target_date}`).classList.add('current_day')
            // const el = document.querySelector('#parse_emotion_view');
            // const sheet = el.sheet;
            // const rules = sheet.cssRules;
            // const rule = rules[0];
            // sheet.insertRule('.current_day::after{content: "'+ day +'"; position: absolute; line-height: 29px; top: -1.5px; bottom: 0; margin: 0 auto; width: 32px; height: 32px; background: #FFE3DF; left: 0; border-radius: 50%;}', rules.length)
            // if(day<10){
            //     day = "0" + day;
            // }
            // console.log(current_year, current_month, day)

        }

        function changeMonth(diff) {
            current_month = current_month + diff;
            if(current_month == 0){
                current_year = current_year - 1;
                current_month = 12;
            }else if(current_month === 13){
                current_year = current_year + 1;
                current_month = 1;
            }
            loadCalendar(current_year, current_month)
        }

        function loadCalendar(year, month){
            changeYearMonth(year, month);
            document.getElementById('current_date').innerText = `${year}년  ${month}월`
            // $("#current_date").text(`${year}년  ${month}월`)
            console.log(this_year, year, this_month, month)
            if(this_year === year && this_month === month){
                setDate(this_date)
            }
            
        }

        let current_year = (new Date()).getFullYear();
        let current_month = (new Date()).getMonth() + 1;
        let current_date = (new Date()).getDate();

        let this_year = (new Date()).getFullYear();
        let this_month = (new Date()).getMonth() + 1;
        let this_date = (new Date()).getDate();

        loadCalendar(current_year, current_month)
        setDate((new Date()).getDate())
        // 달력 만들기 끝

        // 오늘 날짜 LNB에 추가하기
        // document.getElementById('current_date_tag').innerText = `${current_year}-${current_month}-${current_date}`
        // 달력 끝



    </script>
</body>
</html>